<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# api

```go
import "github.com/aexvir/skladka/internal/api"
```

## Index

- [func WithAllowedPaths\(whitelist \[\]string\) func\(http.Handler\) http.Handler](<#WithAllowedPaths>)
- [func WithForbiddenPaths\(blacklist \[\]string\) func\(http.Handler\) http.Handler](<#WithForbiddenPaths>)
- [func WithLogging\(logger \*logging.Logger\) func\(http.Handler\) http.Handler](<#WithLogging>)
- [func WithPathPrefix\(prefix string\) func\(http.Handler\) http.Handler](<#WithPathPrefix>)
- [func WithTracing\(tracer \*tracing.Tracer\) func\(http.Handler\) http.Handler](<#WithTracing>)


<a name="WithAllowedPaths"></a>
## func [WithAllowedPaths](<https://github.com/aexvir/skladka/blob/master/internal/api/middleware.go#L112>)

```go
func WithAllowedPaths(whitelist []string) func(http.Handler) http.Handler
```

WithAllowedPaths only allows requests to paths starting with the given prefixes. Returns http404 if the path is not allowed. This allows serving the same container on different subdomains without every subdomain being able to serve every path. e.g. api.example.com/\* \-\> :3000/\* but api.example.com/dash \-\> http404

<a name="WithForbiddenPaths"></a>
## func [WithForbiddenPaths](<https://github.com/aexvir/skladka/blob/master/internal/api/middleware.go#L138>)

```go
func WithForbiddenPaths(blacklist []string) func(http.Handler) http.Handler
```

WithForbiddenPaths blocks requests to paths starting with the given prefixes. Returns http404 if the path is blacklisted. This allows serving the same container on different subdomains without every subdomain being able to serve every path.

<a name="WithLogging"></a>
## func [WithLogging](<https://github.com/aexvir/skladka/blob/master/internal/api/middleware.go#L46>)

```go
func WithLogging(logger *logging.Logger) func(http.Handler) http.Handler
```

WithLogging enables logging service wide. To do that, it first injects the logger to the request context, so any downstream function can extract it as needed to log stuff. Additionally, it uses the logger to log every request received.

<a name="WithPathPrefix"></a>
## func [WithPathPrefix](<https://github.com/aexvir/skladka/blob/master/internal/api/middleware.go#L91>)

```go
func WithPathPrefix(prefix string) func(http.Handler) http.Handler
```

WithPathPrefix prepends the path prefix to the request URL. This allows serving the same container on different subdomains without the need for a reverse proxy nor the user specifying the path. e.g. dash.example.com \-\> :3000/dash but api.example.com \-\> :3000/\*

<a name="WithTracing"></a>
## func [WithTracing](<https://github.com/aexvir/skladka/blob/master/internal/api/middleware.go#L20>)

```go
func WithTracing(tracer *tracing.Tracer) func(http.Handler) http.Handler
```

WithTracing returns a middleware that adds tracing to all requests.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
